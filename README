Installation
============

This software requires Python 2.6 or 2.7 to run.

install 'setuptools', from http://pypi.python.org/pypi/setuptools#files

then, install 'pip', using command

$ easy_install-2.6 pip
 
install 3rd party dependencies using pip,

$ pip-2.6 install sqlitedict
$ pip-2.6 install xmodem
$ pip-2.6 install sauce
$ pip-2.6 install requests
$ pip-2.6 install py-bcrypt
$ pip-2.6 install pyftpdlib

Getting Started
===============

To start the system, execute command 

	python2.6 engine.py 

Command line arguments to engine.py,
 -cfg <configuration file>
 -v enable debug logging


Connecting
==========

telnet localhost 6023


Compatible Terminals
====================

Any Unicode Terminal. We use a codepage translation for IBM artwork to UTF-8,

  https://maze.io/2012/09/18/cp437-rendering-using-utf-8/index.html

iTerm, uxterm, Some fonts better than others.

One exception is made for cp437-only clients, such as SyncTerm. This is implemented
as door bbs/charset.py, and optional parameters to showfile() and echo().

Compatible terminal clients
===========================

PuTTy
 - under preference item 'Window -> Translation',
   option 'Remote character set', select or key in 'UTF-8'.

iTerm
 - Under Preferences -> Terminal, set Character Encoding to UTF-8
   Also set Regular Font to "Andale Mono" under Text

Unicode Unix
 - uxterm, urxvt, gnome-terminal, Konsole, ...

Classic Unix
 - To display block art ansi, a font set such as 'terminus',
   or 'vga fonts' supplied with dosemu, of encoding 'cp437'
   should be used.
 - select cp437 encoding when prompted by the bbs system.

SyncTerm
 - select cp437 encoding when prompted by the bbs system.


Support
=======



Monitoring
==========

Sessions are recorded to ttyrecordings/ folder, and can be played with 'ttyplay'
or compatible utility. The '-p' option can be used to monitor a live sessions,
analogous to 'tail -f'.


Session Scripts
===============

The default.ini 'scriptpath' of [session] defines folder 'default/', the default
lookup path for goto() and gosub() commands executed by bbs scripts. This path
should also contain the 'matrix.py' script.

By default, matrix.py will chain to 'nua.py' for new account creation, and
'main.py' for a main menu. The 'topscript' script, 'top.py' should receive
the handle of the user that is authorized, and log the call. If 'topscript'
is called without a handle, the value will default to 'None', and the user
is presumed 'anonymous'.


Matrix
======

The default.ini section 'matrix' describes the 'script' path of a python
program that is loaded when a telnet connection is first made. This script
should initialize a login handshake, or otherwise approve the connection for
continuation.

This section also defines a 'topscript' python program, which is the script to
execute after the 'matrix' routine has determined succesful authentication.


Example scripts
===============

These scripts are found in the default/ subdirectory

  charset.py    prompt user to select 'cp437' or 'utf-8' character set
  lc.py         display 'last callers' of the board
  logoff.py     an automsg display/prompt and logoff
  main.py       main menu, called by default topscript, top.py
  matrix.py     login script, called by new connections
  news.py       file reader used to display 'system news'
  nua.py        new user application routine called by default matrix, matrix.py
  ol.py         bbs-scene.org enabled 'one liners' / wall script
  si.py         display system information door
  speedhack.py  an alternative 'topscript', to simulate dgamelaunch+NAO
  telnet.py     a telnet-out door, pass telnet address/port  as arguments
  top.py        default 'top script' called after authentication success
  weather.py    a weather API and lightbar demonstration .. ?


Globals
=======

bbs helper functions are exported to the the global namespace of all bbs scripts.
these scripts can be found in the 'bbs' sub-folder. the special __init__.py
file defines a special list, '__all__', containing a list of terms to be
injected into all bbs session scripts. it is as if the statement:

from bbs import *

is applied to all bbs scripts executed by goto() and gosub() commands.

An irc channel, '#prsv' on efnet, is available for development discussion.
